<html>

<head>
	<title>RockDice</title>
	<meta charset="utf-8">
	<meta name="viewport"
		content="initial-scale=1.0, width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
	<link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">
	<style>
		body {
			padding: 0cm;
			margin: 0cm;
			background-image: url('bg.jpg');
			background-color: #330033;
			background-repeat: no-repeat;
			background-attachment: fixed;
			background-size: cover;
			background-position: center;
			font-family: 'Oswald', sans-serif;
			color: #ffffff;
			user-select: none;
		}

		#editDiv {
			padding: 0cm;
			margin: 0cm;
			background-color: rgba(255, 0, 0, 0.5);
			overflow: hidden;
			position: fixed;
			width: 100%;
			height: 100%;
			z-index: 1;
			display: none;
		}

		#diceDiv {
			padding: 0cm;
			margin: 0cm;
			background-color: rgba(0, 0, 0, 0.75);
			overflow: hidden;
			position: fixed;
			width: 100%;
			height: 100%;
			z-index: 2;
			justify-content: center;

			align-items: center;
			display: flex;
			flex-direction: column;
		}

		.menuStub {
			height: 1.7cm;
			width: 100%;
		}

		.menuDiv {
			overflow: hidden;
			background-color: #223;
			position: fixed;
			bottom: 0;
			width: 100%;
			z-index: 3;
			-webkit-box-shadow: 0px 0px 5px 2px rgba(0, 0, 0, 0.75);
			-moz-box-shadow: 0px 0px 5px 2px rgba(0, 0, 0, 0.75);
			box-shadow: 0px 0px 5px 2px rgba(0, 0, 0, 0.75);
			padding: 0.1cm;
			justify-content: center;
			display: flex;
		}

		.menuButton {
			padding-left: 0.1cm;
			padding-right: 0.1cm;
			padding-top: 0cm;
			padding-bottom: 0cm;
			margin: 0cm;
			width: 1.5cm;
			height: 1.5cm;
		}

		.diceButton {
			padding-left: 0.2cm;
			padding-right: 0.2cm;
			padding-top: 0.5cm;
			padding-bottom: 0cm;
			margin: 0.0cm;
			width: 2.5cm;
			height: 2.5cm;
		}

		#diceStart {
			padding-left: 0cm;
			padding-right: 0cm;
			padding-top: 0.1cm;
			padding-bottom: 0.5cm;
			margin: 0cm;
			width: 2.5cm;
			height: 2.5cm;
		}

		.progSlider {
			-webkit-appearance: none;
			width: 100%;
			height: 0.025cm;
			border-radius: 5px;
			background: linear-gradient(90deg, rgba(128, 128, 255, 1) 0%, rgba(0, 255, 255, 1) 50%, rgba(255, 128, 0, 1) 100%);
			outline: none;
			margin: 0px;
			padding: 0px;
		}

		.progSlider::-webkit-slider-thumb {
			-webkit-appearance: none;
			appearance: none;
			width: 0.25cm;
			height: 0.25cm;
			border-radius: 50%;
			background: #fff;
			cursor: pointer;
		}

		.progSlider::-moz-range-thumb {
			width: 0.25cm;
			height: 0.25cm;
			border-radius: 50%;
			background: #fff;
			cursor: pointer;
		}

		#progSliderRow {
			width: 100%;
			padding-left: 0px;
			padding-right: 0px;
			padding-top: 0px;
			padding-bottom: 0.5cm;

		}

		#genControlsRow {
			padding: 0.0cm;
			margin: 0.0cm;
			align-items: center;
			display: flex;
			flex-direction: row;
			flex-wrap: wrap;
			justify-content: center;
		}

		#roundDrums {
			transform-origin: 50% 50%;
		}
	</style>
</head>

<body>
	<div id='mainDiv'>
		<div class="menuDiv">
			<img class='menubutton' src='iconplay.svg' />
			<img class='menubutton' src='iconshare.svg' />
			<img class='menubutton' src='iconundo.svg' />
		</div>
		<div id='editDiv'>
			<p>123-1</p>
			<p>123-2</p>
			<p>123-3</p>
			<p>123-4</p>
			<p>123-5</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123</p>
			<p>123-5</p>
			<p>123-4</p>
			<p>123-3</p>
			<p>123-2</p>
			<p>123-1</p>
		</div>
		<div id='diceDiv'>
			<!-- <svg version="1.1" class='diceButton' id='svgdrums' viewBox="0 0 512 512" height="512" width="512">
				
				<g id='roundDrums'>
					<circle cx="256" cy="256" r="248" style="fill:none;stroke:#00ffff;stroke-width:16;" />
					<rect y="256" x="8" height="16" width="256" style="fill:#00ffff;stroke-width:0;" />
					<text style="font-size:96px;fill:#00ffff;stroke:none;" x="47.71637" y="240.6649">Drums</text>
				</g>
			</svg>-->
			<div id='startGenRow'>
				<img src='icondice.svg' id='diceStart' />
			</div>
			<div id='progNameRow'>
				Cm7-Adim-E#-Bb
			</div>
			<div id='progSliderRow'>
				<input type="range" min="0" max="999" value="50" class="progSlider">
			</div>
			<div id='genControlsRow'>
				<div id='drumBassPart'>
					<svg version="1.1" class='diceButton' id='svgdrums' viewBox="0 0 512 512" height="512" width="512">

						<g id='roundDrums'>
							<circle cx="256" cy="256" r="248" style="fill:none;stroke:#00ffff;stroke-width:16;" />
							<rect y="256" x="8" height="16" width="256" style="fill:#00ffff;stroke-width:0;" />
							<text style="font-size:96px;fill:#00ffff;stroke:none;" x="47.71637"
								y="240.6649">Drums</text>
						</g>
					</svg><img class='diceButton' src='iconbass.svg' />
				</div>
				<div id='riffAuxPart'>
					<img class='diceButton' src='iconriff.svg' /><img class='diceButton' src='iconaux.svg' />
				</div>
			</div>
			<div class='menuStub'>&nbsp;</div>
		</div>
	</div>

	<script type='text/javascript'>
		console.log('init');

		function inputval(c, r) {
			let me = this;
			this.value = 0;
			this.rotation = r;
			this.component = c;
			this.startY = 0;
			this.startValue = 0;
			//this.lastY = 0;
			//this.started = false;
			this.setValue = function (n) {
				console.log('setValue', n);
				this.value = n;
				//this.component.style.transform = "rotate(" + n * 360 / 1000 + "deg)";
				this.rotation.style.transform = "rotate(" + n * 360 / 1000 + "deg)";
			}
			this.click = function () {
				console.log('click');
			}
			this.rakeMouseUp = function (mouseEvent) {
				//if (this.started) {
				mouseEvent.preventDefault();
				var dY = mouseEvent.clientY - this.startY;
				window.removeEventListener('mousemove', this.bMove, true);
				window.removeEventListener('mouseup', this.bUp, true);
				//this.started = false;
				console.log('up', dY);
				//}
				if (Math.abs(dY) < 10) {
					this.click();
				}
			};
			this.rakeMouseMove = function (mouseEvent) {
				//if (this.started) {
				mouseEvent.preventDefault();
				var dY = mouseEvent.clientY - this.startY;
				console.log('move', dY);
				//this.lastY = mouseEvent.clientY;

				this.setValue(this.startValue - dY /2);
				//}
			};
			this.cmousedown = function (mouseEvent) {
				console.log('cmousedown', mouseEvent);
				mouseEvent.preventDefault();
				this.startY = mouseEvent.clientY;
				//this.lastY = mouseEvent.clientY;
				//this.started = true;
				window.addEventListener('mouseup', this.bUp, false);
				window.addEventListener('mousemove', this.bMove, true);
				this.startValue = this.value;
			}
			this.ctouchstart = function (touchEvent) {
				console.log('ctouchstart', touchEvent);
				//this.started = true;
			}
			this.ctouchmove = function (touchEvent) {
				//if (this.started) {
				console.log('ctouchmove', touchEvent);
				//}
			}
			this.ctouchend = function (touchEvent) {
				//if (this.started) {
				console.log('ctouchend', touchEvent);
				//this.started = false;
				//}
			}
			this.bUp = this.rakeMouseUp.bind(me);
			this.bMove = this.rakeMouseMove.bind(me);
			//window.addEventListener('mouseup', this.rakeMouseUp.bind(this), false);
			//this.component.addEventListener('mousemove', this.rakeMouseMove.bind(this), true);
			c.addEventListener('mousedown', cmousedown.bind(this), false);
			c.addEventListener("touchstart", ctouchstart.bind(this), false);
			c.addEventListener("touchmove", ctouchmove.bind(this), false);
			c.addEventListener("touchend", ctouchend.bind(this), false);
			return this;
		}

		var dr = inputval(document.getElementById('svgdrums'), document.getElementById('roundDrums'));
		//dr.setValue(777);
	</script>
</body>

</html>